(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(t,e,n){t.exports=n(27)},20:function(t,e,n){},23:function(t,e,n){},24:function(t,e,n){},27:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(11),c=n.n(i),o=(n(20),n(5)),l=n(2),s=n(3),u=n(6),f=n(8),m=n(7),d=n(4),p=n(14),h=(n(23),function t(){var e=this;Object(s.a)(this,t),this.numLines=0,this.functionData={},this.currentStack=[],this.parse=function(t){var n=t.split("\n");e.numLines=n.length;var a=0,r=n[a++],i=n[a++];for(r.match(/Version: [23].*/)&&i.match(/File format: [2-4]/)||(console.log("Invalid file"),console.log(r,i));a<e.numLines;a++)e.parseLine(n[a]);return e.functionData},this.parseLine=function(t){var n=t.split("\t");if(!(n.length<5)){var a=parseInt(n[1],10);if(a){var r=n[2];switch(e.functionData[a]||(e.functionData[a]={id:a,timeEnter:0,memoryEnter:0,timeExit:0,memoryExit:0,timeDiff:0,memoryDiff:0,depth:0,name:"",internal:0,file:"",line:"",params:[],return:"",children:[],parent:0}),r){case"0":if(e.functionData[a].depth=parseInt(n[0],10),e.functionData[a].timeEnter=e.formatFloat(n[3]),e.functionData[a].memoryEnter=e.formatFloat(n[4]),e.functionData[a].name=n[5],e.functionData[a].internal=!!n[6],e.functionData[a].file=n[8],e.functionData[a].line=n[9],n[7]?e.functionData[a].params=[n[7]]:e.functionData[a].params=n.slice(11),e.currentStack.length){e.functionData[a].parent=e.currentStack[e.currentStack.length-1];var i=e.currentStack[e.currentStack.length-1];e.functionData[i].children.push(a)}e.currentStack.push(a);break;case"1":e.functionData[a].timeExit=e.formatFloat(n[3]),e.functionData[a].memoryExit=e.formatFloat(n[4]),e.functionData[a].timeDiff=e.formatFloat(e.functionData[a].timeExit-e.functionData[a].timeEnter),e.functionData[a].memoryDiff=e.formatFloat(e.functionData[a].memoryExit-e.functionData[a].memoryEnter),e.currentStack.pop();break;case"R":e.functionData[a].return=n[5];break;default:console.log("Invalid line",t)}}}},this.formatFloat=function(t){return parseFloat(t)}}),g=n(13),E=n.n(g);n(24);function y(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,a=Object(d.a)(t);if(e){var r=Object(d.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(m.a)(this,n)}}var v=function(t){Object(f.a)(n,t);var e=y(n);function n(){var t;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(t=e.call.apply(e,[this].concat(i))).getChildContainer=function(){return t.props.entry.children.length?t.props.entry.isExpanded?r.a.createElement("div",{className:"TraceEntry-children expanded","data-entryid":t.props.entry.id},r.a.createElement("div",{className:"TraceEntry-children-leftpad","data-entryid":t.props.entry.id,onClick:function(){t.props.onCollapse(t.props.entry.id)}}),r.a.createElement("div",{className:"TraceEntry-children-container"},t.props.entry.children.map(function(e){return r.a.createElement(n,Object.assign({},t.props,{key:e,isChild:!0,entry:t.props.allEntries[e]}))}))):r.a.createElement("div",{className:"TraceEntry-children collapsed","data-entryid":t.props.entry.id,onClick:function(){t.props.onExpand(t.props.entry.id)}}):null},t.renderParams=function(t){return" "+t.map(function(t){return t.substr(0,50)}).join(", ")+" "},t.formatFloat=function(t){return+(Math.round(t+"e+5")+"e-5")},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props.entry,e=this.props.allEntries[this.props.entry.parent],n=0,a=0;if(e){var i=e.timeDiff,c=e.memoryDiff;0!==i&&(n=t.timeDiff/i*100),0!==c&&(a=t.memoryDiff/c*100)}var o={};o.backgroundColor="rgba(255, 0, 0, ".concat(n/100,")");var l=E()("TraceEntry-data",{isHighlighted:t.isHighlighted});return r.a.createElement("div",{className:"TraceEntry"},r.a.createElement("div",{className:l,style:o},r.a.createElement("div",{className:"TraceEntry-func",title:t.file+":"+t.line},r.a.createElement("div",{className:"TraceEntry-funcname"},t.name),"(",r.a.createElement("div",{className:"TraceEntry-args"},t.params.length?this.renderParams(t.params):null),") -> ",r.a.createElement("div",{className:"TraceEntry-return"},t.return.substr(0,50))),r.a.createElement("div",{className:"TraceEntry-metric"},n>0?r.a.createElement("div",{className:"TraceEntry-metric-percentage"},"( ",this.formatFloat(n),"% ) \xa0"):null,this.formatFloat(t.timeDiff)),r.a.createElement("div",{className:"TraceEntry-metric"},a>0?r.a.createElement("div",{className:"TraceEntry-metric-percentage"},"( ",this.formatFloat(a),"% ) \xa0"):null,this.formatFloat(t.memoryDiff))),this.getChildContainer())}}]),n}(a.Component),D=n(9);function b(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,a=Object(d.a)(t);if(e){var r=Object(d.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(m.a)(this,n)}}var F=function(t){Object(f.a)(n,t);var e=b(n);function n(){var t;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(t=e.call.apply(e,[this].concat(i))).state={isReady:!1,traceData:[],timeFilterInput:"",functionFilterInput:"",filterTime:0,filterFunction:""},t.onDrop=function(e){var n=new FileReader;n.onabort=function(){return console.log("file reading was aborted")},n.onerror=function(){return console.log("file reading has failed")},n.onload=function(){var e=new h;t.setState({isReady:!0,traceData:e.parse(n.result)})},e.forEach(function(t){return n.readAsText(t,"utf-8")})},t.renderEntry=function(e){return e.parent?null:r.a.createElement(v,{key:e.id,entry:e,allEntries:t.state.traceData,onExpand:t.expandEntry,onCollapse:t.collapseEntry,filterTime:t.state.filterTime,filterFunction:t.state.filterFunction})},t.expandEntry=function(e){t.setState({traceData:Object(l.a)({},t.state.traceData,Object(o.a)({},e,Object(l.a)({},t.state.traceData[e],{isExpanded:1})))})},t.collapseEntry=function(e){t.setState({traceData:Object(l.a)({},t.state.traceData,Object(o.a)({},e,Object(l.a)({},t.state.traceData[e],{isExpanded:0})))})},t.highlightEntries=function(){t.setState({traceData:Object(D.mapValues)(t.state.traceData,function(e){return Object(l.a)({},e,{isHighlighted:t.shouldHighlightEntry(e)})})},t.expandTree)},t.shouldHighlightEntry=function(e){return t.state.filterTime&&e.timeDiff>=t.state.filterTime||t.state.filterFunction&&-1!==e.name.indexOf(t.state.filterFunction)},t.expandTree=function(){t.setState({traceData:Object(D.mapValues)(t.state.traceData,function(e){return Object(l.a)({},e,{isExpanded:e.isExpanded||t.entryHasExpandedChildren(e)})})})},t.entryHasExpandedChildren=function(e){return e.children&&e.children.map(function(e){var n=t.state.traceData[e];return n.isExpanded||n.isHighlighted||t.entryHasExpandedChildren(n)?n:{}}).some(function(t){return t.isExpanded||t.isHighlighted})},t.onChangeFilterFunction=function(e){t.setState({functionFilterInput:e.currentTarget.value})},t.onChangeFilterTime=function(e){t.setState({timeFilterInput:e.currentTarget.value})},t.applyFilters=function(){t.setState({filterTime:parseFloat(t.state.timeFilterInput),filterFunction:t.state.functionFilterInput},t.highlightEntries)},t.getHighlightedElements=function(){return[].slice.call(document.getElementsByClassName("isHighlighted"))},t.onNextHighlight=function(){var e=t.getHighlightedElements();if(e.length){var n=e.find(function(t){var e=t.getBoundingClientRect();return e.top>e.height})||e[0];window.scrollTo(0,window.scrollY+n.getBoundingClientRect().top)}},t.onPrevHighlight=function(){var e=t.getHighlightedElements().reverse();if(e.length){var n=e.find(function(t){return t.getBoundingClientRect().top<0})||e[0];window.scrollTo(0,window.scrollY+n.getBoundingClientRect().top)}},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"App",onClick:this.clickHandler},!this.state.isReady&&r.a.createElement(p.a,{onDrop:this.onDrop},function(t){var e=t.getRootProps,n=t.getInputProps;return r.a.createElement("div",Object.assign({},e(),{className:"TraceViewDropzone"}),r.a.createElement("input",n()),r.a.createElement("p",null,"Drag and drop or click to choose a XDebug Trace File"))}),r.a.createElement("div",{className:"filters"},r.a.createElement("label",{htmlFor:"function-filter"},"Filter by function"),r.a.createElement("input",{id:"function-filter",name:"function-filter",type:"text",onChange:this.onChangeFilterFunction}),r.a.createElement("label",{htmlFor:"time-filter"},"Filter by time"),r.a.createElement("input",{id:"time-filter",name:"time-filter",type:"text",onChange:this.onChangeFilterTime}),r.a.createElement("button",{onClick:this.applyFilters},"Apply filters")),this.state.isReady&&r.a.createElement("div",{className:"entries"},Object(D.map)(this.state.traceData,function(e){return t.renderEntry(e)})),r.a.createElement("div",{className:"HighlightedNav"},r.a.createElement("button",{onClick:this.onPrevHighlight},"\xab Prev Highlight"),r.a.createElement("button",{onClick:this.onNextHighlight},"Next Highlight \xbb")))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[15,1,2]]]);
//# sourceMappingURL=main.100fbd74.chunk.js.map